<div class="twitch-register-container">

  <div class="twitch-form-wrapper">
    <div class="twitch-form-box">
      <h2 class="twitch-title">Crea tu cuenta</h2>

      <div *ngIf="errorMessage" class="twitch-error-banner">
        {{ errorMessage }}
      </div>

      <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="twitch-form">
        <div class="twitch-field">
          <input 
            type="text" 
            formControlName="name" 
            placeholder="Nombre"
            [class.twitch-input-error]="name?.invalid && name?.touched">
          <div *ngIf="name?.invalid && name?.touched" class="twitch-error-text">
            El nombre es requerido
          </div>
        </div>

        <div class="twitch-field">
          <input 
            type="text" 
            formControlName="lastname" 
            placeholder="Apellido"
            [class.twitch-input-error]="lastname?.invalid && lastname?.touched">
          <div *ngIf="lastname?.invalid && lastname?.touched" class="twitch-error-text">
            El apellido es requerido
          </div>
        </div>

        <div class="twitch-field">
          <input 
            type="text" 
            formControlName="username" 
            placeholder="Nombre de usuario"
            [class.twitch-input-error]="username?.invalid && username?.touched">
          <div *ngIf="username?.invalid && username?.touched" class="twitch-error-text">
            El nombre de usuario es requerido
          </div>
        </div>

        <div class="twitch-field">
          <input 
            type="email" 
            formControlName="email" 
            placeholder="Correo electrónico"
            [class.twitch-input-error]="email?.invalid && email?.touched">
          <div *ngIf="email?.invalid && email?.touched" class="twitch-error-text">
            <span *ngIf="email?.errors?.['required']">El email es requerido</span>
            <span *ngIf="email?.errors?.['email']">Ingresa un email válido</span>
          </div>
        </div>

        <div class="twitch-field">
          <input 
            type="password" 
            formControlName="password" 
            placeholder="Contraseña"
            [class.twitch-input-error]="password?.invalid && password?.touched">
          <div *ngIf="password?.invalid && password?.touched" class="twitch-error-text">
            <span *ngIf="password?.errors?.['required']">La contraseña es requerida</span>
            <span *ngIf="password?.errors?.['minlength']">Mínimo 8 caracteres</span>
          </div>
        </div>

        <button 
          type="submit" 
          [disabled]="registerForm.invalid || isLoading"
          class="twitch-submit-btn">
          <span *ngIf="!isLoading">Registrarse</span>
          <span *ngIf="isLoading" class="twitch-spinner"></span>
        </button>
      </form>

      <div class="twitch-footer">
        <p>¿Ya tienes cuenta? 
          <a routerLink="/login">Inicia sesión</a>
        </p>
      </div>
    </div>
  </div>
</div>
